import{_ as j,a as I,b as S,c as A}from"./Tree_1-DNOGTyeS.js";import{u as V,c as n,a as o,e as _,d as t,t as m,f as N,n as b,g as M,F as h,h as P,r as p,o as z,i as D,j as x,w as F,k as B,b as E}from"./index-DuiahglQ.js";import{t as L}from"./SDGs_goal-D1XSLY4x.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H=[{id:1,title:"剩食問題",group:"一年忠班",startTime:"1746028800",endTime:"1753977600",types:[2],intro:"",progress:10,thumbnail:"thumb2.jpg",description:""},{id:2,title:"剩食問題",group:"一年孝班",startTime:"1746028800",endTime:"1753977600",types:[2],intro:"",progress:40,thumbnail:"thumb2.jpg",description:""},{id:3,title:"節約用水",group:"全校",startTime:"",endTime:"",types:[6],intro:"",progress:80,thumbnail:"thumb2.jpg",description:""},{id:4,title:"社區踏查",group:"",startTime:"",endTime:"",types:[2,3],intro:"",progress:50,thumbnail:"thumb2.jpg",description:""}],R=["onClick"],X={class:"p-6 md:p-15 flex flex-col justify-center w-full"},q={class:"text-md mb-2"},G={class:"text-md mb-2"},J={class:"text-md mb-2"},K={class:"text-md mb-2"},O={class:"flex items-center w-full md:w-70 gap-3"},Q={class:"relative flex-1 bg-gray-200 rounded-full h-2 overflow-hidden"},W={class:"w-10 text-sm text-gray-700 text-left"},Y={class:"flex flex-wrap gap-2 mt-2"},Z={__name:"ActionCard",props:{filteredInfo:{type:Array,default:()=>[]}},setup(y){V();const f=c=>c<40?"bg-red-500":c<70?"bg-yellow-400":"bg-green-500",g=c=>{};return(c,i)=>(o(!0),n(h,null,_(y.filteredInfo,s=>(o(),n("div",{class:"animate-fade-in-up cursor-pointer w-full md:max-w-7xl md:mx-auto min-h-96 md:min-h-80 bg-white rounded-xl shadow-md overflow-hidden flex flex-col md:flex-row hover:scale-105",key:s.id,onClick:d=>g(s.id)},[i[2]||(i[2]=t("div",{class:"relative w-full h-64 md:h-auto md:w-1/2"},[t("img",{src:j,alt:"Card Image",class:"absolute inset-0 w-full h-full object-cover object-center"})],-1)),t("div",X,[t("h2",q,"主題："+m(s.title),1),t("p",G," 時間："+m(s.startTime.length?new Date(s.startTime*1e3).toLocaleDateString()+" ~ "+new Date(s.endTime*1e3).toLocaleDateString():"無"),1),t("p",J,"成員："+m(s.group),1),t("p",K,"描述："+m(s.intro),1),t("div",O,[i[0]||(i[0]=N(" 進度： ",-1)),t("div",Q,[t("div",{class:M(["h-2 rounded-full transition-all duration-500",f(s.progress)]),style:b({width:s.progress+"%"})},null,6)]),t("span",W,m(s.progress)+"% ",1)]),t("div",Y,[(o(!0),n(h,null,_(s.types,d=>(o(),n("span",{key:d,class:"px-3 py-1 text-sm rounded-full bg-blue-100 text-blue-800"},m(P(L)[d].title),1))),128))]),i[1]||(i[1]=t("p",{class:"text-gray-600 text-sm text-right"},"更多",-1))])],8,R))),128))}},ee={class:"actions-wrapper"},te={class:"cloud-container-left"},se=["src"],ae={class:"cloud-container-right"},le=["src"],re={class:"relative z-5 pt-25 w-full shadow-md bg-header text-rice-500"},ne={class:"container mx-auto flex items-center p-4"},oe={class:"w-1/3"},ie={class:"p-10 flex flex-col justify-center items-center gap-8 max-w-7xl md:mx-auto"},de={key:0,class:"text-center text-gray-500 mt-8"},w=3,ce={__name:"Actions",setup(y){const f=p([]),g=p([]),c=r=>{const e=[];for(let a=0;a<r;a++)e.push({id:`tree-${a}`,src:A,style:{top:`${a*150+Math.random()*30}px`,transform:`rotate(${(Math.random()-.5)*15}deg) scaleX(${Math.random()>.5?1:-1})`,left:`${(Math.random()-.5)*60}px`,zIndex:a}});return e};z(()=>{f.value=c(10),g.value=c(10)});const i=p(H),s=p({sdgs:[],time:"all",startDate:"",endDate:""}),d=p(1),T=r=>{s.value=r,d.value=1},v=D(()=>{let r=i.value;if(s.value.sdgs.length>0&&(r=r.filter(e=>e.types&&e.types.some(a=>s.value.sdgs.includes(a)))),s.value.time!=="all"){const e=new Date;let a,l;switch(s.value.time){case"day":l=new Date(e),a=new Date(e),a.setDate(e.getDate()-1);break;case"week":l=new Date(e),a=new Date(e),a.setDate(e.getDate()-7);break;case"custom":s.value.startDate&&s.value.endDate&&(a=new Date(s.value.startDate),a.setHours(0,0,0,0),l=new Date(s.value.endDate),l.setHours(23,59,59,999));break}a&&l&&(r=r.filter(u=>{if(!u.startTime||!u.endTime||!String(u.startTime).trim()||!String(u.endTime).trim())return!1;const k=new Date(Number(u.startTime)*1e3),C=new Date(Number(u.endTime)*1e3);return k<=l&&C>=a}))}return r}),$=D(()=>{const r=(d.value-1)*w,e=r+w;return v.value.slice(r,e)});return(r,e)=>{const a=B("router-link");return o(),n("div",ee,[t("div",te,[(o(!0),n(h,null,_(f.value,l=>(o(),n("img",{key:l.id,src:l.src,style:b(l.style),alt:"Decorative Cloud"},null,12,se))),128))]),t("div",ae,[(o(!0),n(h,null,_(g.value,l=>(o(),n("img",{key:l.id,src:l.src,style:b(l.style),alt:"Decorative Cloud"},null,12,le))),128))]),t("header",re,[t("div",ne,[t("div",oe,[x(a,{to:"/",class:"back-home-btn"},{default:F(()=>[...e[1]||(e[1]=[t("span",{class:"text"},"回首頁",-1),t("span",{class:"icon"},"←",-1)])]),_:1})]),e[2]||(e[2]=t("div",{class:"w-1/3 text-center"},[t("h1",{class:"text-2xl md:text-3xl font-bold"},"行動追蹤")],-1)),e[3]||(e[3]=t("div",{class:"w-1/3"},null,-1))])]),t("main",ie,[x(I,{"onUpdate:filters":T,class:"flex flex-wrap justify-center items-center gap-4"}),x(Z,{filteredInfo:$.value,class:"flex flex-col gap-5 w-full px-4 md:px-0"},null,8,["filteredInfo"]),v.value.length===0?(o(),n("div",de,[...e[4]||(e[4]=[t("p",null,"找不到符合條件的行動。",-1)])])):E("",!0),x(S,{class:"flex justify-center items-center gap-4 mt-8",totalItems:v.value.length,itemsPerPage:w,modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value=l)},null,8,["totalItems","modelValue"])])])}}},ge=U(ce,[["__scopeId","data-v-cba393f2"]]);export{ge as default};

import{o as L,l as P,r as u,i as f,m as S,c as d,a as i,d as t,b as g,F,e as H,p as x,v as B,t as w,q as V}from"./index-BVJB8A4w.js";import{t as D}from"./SDGs_goal-D1XSLY4x.js";function C(o,c){const l=a=>{o.value&&!o.value.contains(a.target)&&c()};L(()=>document.addEventListener("mousedown",l)),P(()=>document.removeEventListener("mousedown",l))}const N=["innerHTML"],E={key:0,class:"absolute z-10 mt-2 w-56 bg-white rounded-md shadow-lg max-h-60 overflow-y-auto text-black"},O={key:0,class:"p-2 border-t border-gray-200"},U={class:"inline-flex items-center w-full cursor-pointer"},q=["value"],z=["innerHTML"],G={key:0,class:"absolute z-10 mt-2 w-48 bg-white rounded-md shadow-lg text-black"},I={key:0,class:"flex gap-2 items-center text-black bg-white/50 p-2 rounded-lg"},Q={__name:"HeaderFilter",emits:["update:filters"],setup(o,{emit:c}){const l=u([]),a=u(!1),n=u("all"),v=u(!1),m=u(""),p=u(""),y=u(null),k=u(null);C(y,()=>{a.value=!1}),C(k,()=>{v.value=!1});const $=c,h=f(()=>D.filter(r=>r.value!==0)),T=f(()=>{if(l.value.length===0)return"SDGs";if(l.value.length>1)return`SDGs (${l.value.length})`;const r=D.find(e=>e.value===l.value[0]);return r?r.title.replace(/<br\s*\/?>/g," "):"SDGs"}),M=f(()=>{switch(n.value){case"day":return"最近一天";case"week":return"最近一周";case"custom":return"自訂範圍";default:return"發布時間"}});function b(r){n.value=r,v.value=!1,r!=="custom"&&(m.value="",p.value="")}return S([l,n,m,p],()=>{$("update:filters",{sdgs:l.value,time:n.value,startDate:m.value,endDate:p.value})},{deep:!0,immediate:!0}),(r,e)=>(i(),d("div",null,[t("div",{class:"relative",ref_key:"sdgDropdownRef",ref:y},[t("button",{onClick:e[0]||(e[0]=s=>a.value=!a.value),class:"p-1 px-4 rounded-full bg-gray-500 text-brown-100 font-bold min-w-[150px] text-left flex justify-between items-center gap-2"},[t("span",{innerHTML:T.value,class:"truncate"},null,8,N),e[10]||(e[10]=t("span",null,"▾",-1))]),a.value?(i(),d("div",E,[l.value.length>0?(i(),d("div",O,[t("button",{onClick:e[1]||(e[1]=s=>l.value=[]),class:"text-sm text-blue-600 hover:underline w-full text-center"}," 清除選擇 ")])):g("",!0),(i(!0),d(F,null,H(h.value,s=>(i(),d("div",{key:s.value,class:"p-2 hover:bg-gray-100"},[t("label",U,[x(t("input",{type:"checkbox",value:s.value,"onUpdate:modelValue":e[2]||(e[2]=_=>l.value=_),class:"h-5 w-5 text-green-600 rounded focus:ring-green-500 border-gray-300"},null,8,q),[[B,l.value]]),t("span",{class:"ml-3 text-gray-700",innerHTML:s.title},null,8,z)])]))),128))])):g("",!0)],512),t("div",{class:"relative",ref_key:"timeDropdownRef",ref:k},[t("button",{onClick:e[3]||(e[3]=s=>v.value=!v.value),class:"p-1 px-4 rounded-full bg-gray-500 text-brown-100 font-bold min-w-[150px] text-left flex justify-between items-center gap-2"},[t("span",null,w(M.value),1),e[11]||(e[11]=t("span",null,"▾",-1))]),v.value?(i(),d("div",G,[t("div",{onClick:e[4]||(e[4]=s=>b("all")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 全部時間 "),t("div",{onClick:e[5]||(e[5]=s=>b("day")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 最近一天 "),t("div",{onClick:e[6]||(e[6]=s=>b("week")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 最近一周 "),t("div",{onClick:e[7]||(e[7]=s=>b("custom")),class:"cursor-pointer p-2 hover:bg-gray-100"}," 自訂範圍 ")])):g("",!0)],512),n.value==="custom"?(i(),d("div",I,[x(t("input",{type:"date","onUpdate:modelValue":e[8]||(e[8]=s=>m.value=s),class:"p-1 border rounded-md"},null,512),[[V,m.value]]),e[12]||(e[12]=t("span",{class:"text-gray-600"},"至",-1)),x(t("input",{type:"date","onUpdate:modelValue":e[9]||(e[9]=s=>p.value=s),class:"p-1 border rounded-md"},null,512),[[V,p.value]])])):g("",!0)]))}},W="/Hemei/assets/cover-Bsdi9Mzn.png",R={key:0},j=["disabled"],A=["disabled"],X={__name:"PageLabel",props:{totalItems:{type:Number,required:!0},itemsPerPage:{type:Number,default:6},modelValue:{type:Number,required:!0}},emits:["update:modelValue"],setup(o,{emit:c}){const l=o,a=c,n=f(()=>l.totalItems===0?1:Math.ceil(l.totalItems/l.itemsPerPage)),v=()=>{l.modelValue<n.value&&a("update:modelValue",l.modelValue+1)},m=()=>{l.modelValue>1&&a("update:modelValue",l.modelValue-1)};return(p,y)=>n.value>1?(i(),d("div",R,[t("button",{onClick:m,disabled:o.modelValue===1,class:"px-4 py-2 bg-gray-300 rounded-md disabled:opacity-50"}," 上一頁 ",8,j),t("span",null,"第 "+w(o.modelValue)+" / "+w(n.value)+" 頁",1),t("button",{onClick:v,disabled:o.modelValue===n.value,class:"px-4 py-2 bg-gray-300 rounded-md disabled:opacity-50"}," 下一頁 ",8,A)])):g("",!0)}};export{W as _,Q as a,X as b};

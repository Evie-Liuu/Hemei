import{a as j,b as S,_ as V}from"./PageLabel-CymAiYj0.js";import{r as d,o as P,i as g,c as n,a as r,d as s,F as m,e as p,j as f,w as F,k as N,b as B,u as U,n as x,t as y}from"./index-CYN_MzJr.js";import{i as $}from"./Hemei_story-D1MM_gpy.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SDGs_goal-D1XSLY4x.js";const H={class:"actions-wrapper"},E={class:"cloud-container-left"},L=["src"],M={class:"cloud-container-right"},R=["src"],T={class:"page-background"},W={class:"relative z-5 pt-25 w-full shadow-md bg-header text-rice-500"},q={class:"container mx-auto flex items-center p-4"},A={class:"w-1/3"},G={class:"p-10 flex flex-col justify-center items-center gap-8 max-w-7xl md:mx-auto"},J={class:"grid grid-cols-1 md:grid-cols-3 gap-5 p-4 md:p-0 md:gap-5"},K=["onClick"],O={class:"p-4 flex flex-col justify-center"},Q={class:"text-xl font-bold mb-2"},X={class:"text-gray-600 text-sm"},Y={key:0,class:"text-center text-gray-500 mt-8"},v=6,Z={__name:"Story",setup(ee){const h=d([]),w=d([]);P(()=>{});const D=d($),l=d({sdgs:[],time:"all",startDate:"",endDate:""}),c=d(1),k=a=>{l.value=a,c.value=1},u=g(()=>{let a=D.value;if(l.value.sdgs.length>0&&(a=a.filter(e=>e.types&&e.types.some(i=>l.value.sdgs.includes(i)))),l.value.time!=="all"){const e=new Date;a=a.filter(i=>{if(!i.time||String(i.time).trim()==="")return!1;const t=new Date(Number(i.time)*1e3);if(l.value.time==="day"){const o=new Date;return o.setDate(e.getDate()-1),t>=o}else if(l.value.time==="week"){const o=new Date;return o.setDate(e.getDate()-7),t>=o}else if(l.value.time==="custom"&&l.value.startDate&&l.value.endDate){const o=new Date(l.value.startDate);o.setHours(0,0,0,0);const _=new Date(l.value.endDate);return _.setHours(23,59,59,999),t>=o&&t<=_}return!0})}return a}),b=g(()=>{const a=(c.value-1)*v,e=a+v;return u.value.slice(a,e)}),C=U(),I=a=>{C.push({name:"story-detail",params:{id:a}})};return(a,e)=>{const i=N("router-link");return r(),n("div",H,[s("div",E,[(r(!0),n(m,null,p(h.value,t=>(r(),n("img",{key:t.id,src:t.src,style:x(t.style),alt:"Decorative Cloud"},null,12,L))),128))]),s("div",M,[(r(!0),n(m,null,p(w.value,t=>(r(),n("img",{key:t.id,src:t.src,style:x(t.style),alt:"Decorative Cloud"},null,12,R))),128))]),s("div",T,[s("header",W,[s("div",q,[s("div",A,[f(i,{to:"/sdgs",class:"back-home-btn"},{default:F(()=>[...e[1]||(e[1]=[s("span",{class:"text"},"回上頁",-1),s("span",{class:"icon"},"←",-1)])]),_:1})]),e[2]||(e[2]=s("div",{class:"w-1/3 text-center"},[s("h1",{class:"text-2xl md:text-3xl font-bold"},"故事牆")],-1)),e[3]||(e[3]=s("div",{class:"w-1/3"},null,-1))])]),s("main",G,[f(j,{"onUpdate:filters":k,class:"flex flex-wrap justify-center items-center gap-4"}),s("section",J,[(r(!0),n(m,null,p(b.value,t=>(r(),n("div",{class:"animate-fade-in-up cursor-pointer w-80 md:mx-auto min-h-80 bg-white rounded-xl shadow-md overflow-hidden flex flex-col gap-5 hover:scale-105",key:t.id,onClick:o=>I(t.id)},[e[5]||(e[5]=s("img",{src:V,alt:"Card Image",class:"h-45 object-cover"},null,-1)),s("div",O,[s("h2",Q,y(t.title),1),s("p",X,y(t.intro),1),e[4]||(e[4]=s("p",{class:"text-gray-600 text-sm text-right pe-3"},"更多",-1))])],8,K))),128))]),u.value.length===0?(r(),n("div",Y,[...e[6]||(e[6]=[s("p",null,"找不到符合條件的故事。",-1)])])):B("",!0),f(S,{class:"flex justify-center items-center gap-4 mt-8",totalItems:u.value.length,itemsPerPage:v,modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=t=>c.value=t)},null,8,["totalItems","modelValue"])])])])}}},ne=z(Z,[["__scopeId","data-v-5998d6fe"]]);export{ne as default};

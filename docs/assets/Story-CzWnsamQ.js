import{a as j,b as S,c as V,_ as M}from"./Tree_1-DNOGTyeS.js";import{r as d,o as P,i as y,c as n,a as i,d as s,F as m,e as p,j as f,w as F,k as N,b as z,u as B,n as w,t as D}from"./index-DuiahglQ.js";import{i as U}from"./Hemei_story-D1MM_gpy.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SDGs_goal-D1XSLY4x.js";const E={class:"actions-wrapper"},L={class:"cloud-container-left"},R=["src"],T={class:"cloud-container-right"},W=["src"],X={class:"relative z-5 pt-25 w-full shadow-md bg-header text-rice-500"},q={class:"container mx-auto flex items-center p-4"},A={class:"w-1/3"},G={class:"p-10 flex flex-col justify-center items-center gap-8 max-w-7xl md:mx-auto"},J={class:"grid grid-cols-1 md:grid-cols-3 gap-5 p-4 md:p-0 md:gap-5"},K=["onClick"],O={class:"p-4 flex flex-col justify-center"},Q={class:"text-xl font-bold mb-2"},Y={class:"text-gray-600 text-sm"},Z={key:0,class:"text-center text-gray-500 mt-8"},v=6,ee={__name:"Story",setup(te){const x=d([]),g=d([]),_=a=>{const e=[];for(let l=0;l<a;l++)e.push({id:`tree-${l}`,src:V,style:{top:`${l*150+Math.random()*30}px`,transform:`rotate(${(Math.random()-.5)*15}deg) scaleX(${Math.random()>.5?1:-1})`,left:`${(Math.random()-.5)*60}px`,zIndex:l}});return e};P(()=>{x.value=_(10),g.value=_(10)});const k=d(U),o=d({sdgs:[],time:"all",startDate:"",endDate:""}),c=d(1),b=a=>{o.value=a,c.value=1},u=y(()=>{let a=k.value;if(o.value.sdgs.length>0&&(a=a.filter(e=>e.types&&e.types.some(l=>o.value.sdgs.includes(l)))),o.value.time!=="all"){const e=new Date;a=a.filter(l=>{if(!l.time||String(l.time).trim()==="")return!1;const t=new Date(Number(l.time)*1e3);if(o.value.time==="day"){const r=new Date;return r.setDate(e.getDate()-1),t>=r}else if(o.value.time==="week"){const r=new Date;return r.setDate(e.getDate()-7),t>=r}else if(o.value.time==="custom"&&o.value.startDate&&o.value.endDate){const r=new Date(o.value.startDate);r.setHours(0,0,0,0);const h=new Date(o.value.endDate);return h.setHours(23,59,59,999),t>=r&&t<=h}return!0})}return a}),C=y(()=>{const a=(c.value-1)*v,e=a+v;return u.value.slice(a,e)}),I=B(),$=a=>{I.push({name:"story-detail",params:{id:a}})};return(a,e)=>{const l=N("router-link");return i(),n("div",E,[s("div",L,[(i(!0),n(m,null,p(x.value,t=>(i(),n("img",{key:t.id,src:t.src,style:w(t.style),alt:"Decorative Cloud"},null,12,R))),128))]),s("div",T,[(i(!0),n(m,null,p(g.value,t=>(i(),n("img",{key:t.id,src:t.src,style:w(t.style),alt:"Decorative Cloud"},null,12,W))),128))]),s("header",X,[s("div",q,[s("div",A,[f(l,{to:"/sdgs",class:"back-home-btn"},{default:F(()=>[...e[1]||(e[1]=[s("span",{class:"text"},"回上頁",-1),s("span",{class:"icon"},"←",-1)])]),_:1})]),e[2]||(e[2]=s("div",{class:"w-1/3 text-center"},[s("h1",{class:"text-2xl md:text-3xl font-bold"},"故事牆")],-1)),e[3]||(e[3]=s("div",{class:"w-1/3"},null,-1))])]),s("main",G,[f(j,{"onUpdate:filters":b,class:"flex flex-wrap justify-center items-center gap-4"}),s("section",J,[(i(!0),n(m,null,p(C.value,t=>(i(),n("div",{class:"animate-fade-in-up cursor-pointer w-80 md:mx-auto min-h-80 bg-white rounded-xl shadow-md overflow-hidden flex flex-col gap-5 hover:scale-105",key:t.id,onClick:r=>$(t.id)},[e[5]||(e[5]=s("img",{src:M,alt:"Card Image",class:"h-45 object-cover"},null,-1)),s("div",O,[s("h2",Q,D(t.title),1),s("p",Y,D(t.intro),1),e[4]||(e[4]=s("p",{class:"text-gray-600 text-sm text-right pe-3"},"更多",-1))])],8,K))),128))]),u.value.length===0?(i(),n("div",Z,[...e[6]||(e[6]=[s("p",null,"找不到符合條件的故事。",-1)])])):z("",!0),f(S,{class:"flex justify-center items-center gap-4 mt-8",totalItems:u.value.length,itemsPerPage:v,modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=t=>c.value=t)},null,8,["totalItems","modelValue"])])])}}},ne=H(ee,[["__scopeId","data-v-705dd8ea"]]);export{ne as default};
